<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perfil - Congregação Nyan</title>

  <link rel="stylesheet" href="./src/css/membro.css">
  <link rel="stylesheet" href="./src/css/medias.css">

</head>

<body>
  <button onclick="voltarComReload()" class="voltar">Voltar</button>

  <section class="secao esquerda1">
    <div class="conteudo esquerda1">
      <h1 id="nome"></h1>
      <p id="frase"></p>
      <p id="sobre"></p>
    </div>
  </section>

  <section class="secao direita1">
    <div class="conteudo direita1">
      <h2>Jogos mais jogados</h2>
      <div class="cards">
        <div class="card">
          <h3>CS:GO</h3>
        </div>
        <div class="card">
          <h3>League of Legends</h3>
        </div>
        <div class="card">
          <h3>Elden Ring</h3>
        </div>
        <div class="card">
          <h3>Minecraft</h3>
        </div>
      </div>
    </div>
  </section>

  <section class="secao esquerda2">
    <div class="conteudo esquerda2">
      <h2>Redes</h2>
      <div class="redes">
        <a id="link-twitch" class="btn twitch" target="_blank">Twitch</a>
        <a id="link-discord" class="btn discord" target="_blank">Discord</a>
        <a id="link-insta" class="btn insta" target="_blank">Instagram</a>
      </div>
    </div>
  </section>

  <section class="secao direita2">
    <div class="conteudo direita2">
      <h2>Última Live</h2>
      <div class="embed">
        <iframe id="player" allowfullscreen></iframe>
      </div>
    </div>
  </section>

  <script src="./src/script.js"></script>
  <script>
    // É necessário ter acesso ao objeto MEMBROS definido em script.js
    const urlParams = new URLSearchParams(window.location.search);
    const nomeMembro = urlParams.get('membro');

    // Verifica se o membro existe no objeto MEMBROS
    if (!nomeMembro || !MEMBROS[nomeMembro]) {
      // Redireciona para a página inicial ou mostra um erro
      window.location.href = 'index.html';
    }

    const membro = MEMBROS[nomeMembro];

    // APENAS UMA VEZ: Mapeia as variáveis a partir do objeto 'membro'
    const {
      twitch,
      frase,
      cor,
      sobre,
      discord,
      instagram,
      fundoSecao1,
      fundoSecao2,
      fundoSecao3,
      fundoSecao4,
      jogos // Novo campo
    } = membro;


    // 1. Aplica o conteúdo textual e links
    document.getElementById('nome').textContent = nomeMembro; // Usa nomeMembro aqui
    document.getElementById('frase').textContent = `"${frase}"`;
    document.getElementById('sobre').textContent = sobre;
    document.getElementById('link-twitch').href = `https://twitch.tv/${twitch}`;
    document.getElementById('link-discord').href = discord;
    document.getElementById('link-insta').href = instagram;
    document.getElementById('player').src = `https://player.twitch.tv/?channel=${twitch}&parent=127.0.0.1:5500&muted=true`;

    // 2. Aplica os fundos (código existente, mas usando as variáveis do objeto)
    if (fundoSecao1) {
      const fundo1 = document.querySelector('.secao.esquerda1');
      fundo1.style.background = `url('./src/assets/${fundoSecao1}') center/cover no-repeat`;
    }

    if (fundoSecao2) {
      const fundo2 = document.querySelector('.secao.direita1');
      fundo2.style.background = `url('./src/assets/${fundoSecao2}') center/cover no-repeat`;
    }

    if (fundoSecao3) {
      const fundo3 = document.querySelector('.secao.esquerda2');
      fundo3.style.background = `url('./src/assets/${fundoSecao3}') center/cover no-repeat`;
    }

    if (fundoSecao4) {
      const fundo4 = document.querySelector('.secao.direita2');
      fundo4.style.background = `url('./src/assets/${fundoSecao4}') center/cover no-repeat`;
    }

    // 3. NOVO: Gera os Cards de Jogos Dinamicamente
    const containerCards = document.querySelector('.secao.direita1 .cards'); // Usa o seletor de classe aqui

    if (jogos && containerCards) {
      // Limpa o conteúdo (se você já o removeu no Passo 3, esta linha é redundante, mas segura)
      containerCards.innerHTML = '';

      jogos.forEach(jogo => {
        const cardDiv = document.createElement('div');
        cardDiv.className = 'card';

        const h3 = document.createElement('h3');
        h3.textContent = jogo.nome;

        cardDiv.style.background = `url('./src/assets/${jogo.fundo}') center/cover no-repeat`;

        cardDiv.appendChild(h3);
        containerCards.appendChild(cardDiv);
      });
    }

  </script>
</body>



</html>